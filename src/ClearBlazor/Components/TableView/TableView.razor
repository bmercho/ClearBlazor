@namespace ClearBlazor
@typeparam TItem
@inherits ListBase<TItem>

<CascadingValue Value="this" IsFixed="false">
    <div id=@Id class=@Classes style=@ComputeStyle()>
        <Grid>
            <div id=@_scrollViewerId style=@GetScrollViewerStyle()>
                <div style=@GetContainerStyle()>
                    <div style=@GetHeightDivStyle()>
                        <div style=@GetTransformStyle()>

@*                             @if (RowTemplate != null)
                            {
 *@                                @foreach (var row in _items.Select((item, index) => new { item, index }))
                                {
                                    <TableViewRow TItem=TItem RowData=@row.item
                                                  RowIndex=@row.item.Index
                                                  Index=row.index
                                                  RowId=@(_baseRowId + row.index.ToString())
                                                  RowSpacing=@RowSpacing ColumnSpacing=@ColumnSpacing
                                                  Columns=@Columns />
                                }
                            @* } *@
                        </div>
                    </div>
                </div>
            </div>
            @if (_loadingUp && ShowLoadingSpinner)
            {
                <Grid BackgroundColor=Color.Transparent Margin=20
                      HorizontalAlignment=Alignment.Center VerticalAlignment=Alignment.Start>
                    <Spinner />
                </Grid>
            }
            @if (_loadingDown && ShowLoadingSpinner)
            {
                 <Grid BackgroundColor=Color.Transparent Margin=20
                      HorizontalAlignment=Alignment.Center VerticalAlignment=Alignment.End>
                    <Spinner />
                </Grid>
            }
        </Grid>
    </div>
    @ChildContent
</CascadingValue>