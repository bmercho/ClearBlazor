@namespace ClearBlazor
@typeparam TItem
@inherits ClearComponentBase

<CascadingValue Value="this" IsFixed="false">
    <div id=@Id class=@Classes style=@ComputeStyle()>
        <ScrollViewer @ref="_scrollViewer" Width=@Width Height=@Height>
            <div style="display:grid; position: relative;height: @(_height)px">
                @if (RowTemplate != null)
                {
                    @foreach (var item in _items.Select((item, index) => new { item, index }))
                    {
                        @if (item.item.Equals(_items.First()))
                        {
                            <div id=@_firstItemId style="@(GetContentStyle()) height: @(_itemHeight)px; top: @((_skipItems + item.index) * _itemHeight)px;">
                                @RowTemplate(_items.First())
                            </div>
                        }
                        else
                        {
                            <div style="@(GetContentStyle()) height: @(_itemHeight)px; top: @((_skipItems + item.index) * _itemHeight)px;">
                                @RowTemplate(item.item)
                            </div>
                        }
                    }
                }
            </div>
        </ScrollViewer>
    </div>
</CascadingValue>