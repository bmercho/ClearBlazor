@namespace ClearBlazorSkia.Tests
@using ClearBlazor
@using ClearBlazorSkia.Tests.Tests
@inherits TestBase
<RootComponent @ref=_rootComponent Width=800 Height=600
               BackgroundColor=@Color.Custom("green") LayoutComplete=@LayoutComplete>
    <Grid BackgroundColor=@Color.Custom("red") Columns="2*,*" Rows="*,3*" Margin=10 Padding=5 BorderThickness=5 BorderColor=@Color.Custom("black")>
        <StackPanel Row=0 Column=0 BackgroundColor=@Color.Custom("yellow") />
        <StackPanel Row=1 Column=0 BackgroundColor=@Color.Custom("blue") />
        <StackPanel Row=0 Column=1 BackgroundColor=@Color.Custom("pink") />
        <StackPanel Row=1 Column=1 BackgroundColor=@Color.Custom("violet") />
    </Grid>
</RootComponent>


@code {

    RootComponent _rootComponent = null!;

    private async Task LayoutComplete()
    {
        bool testPassed = CheckComponentLocation(_rootComponent, 800, 600, 0, 0,0,0,800,600);
        if (_rootComponent.Children.Count != 1 || !(_rootComponent.Children[0] is Grid))
            testPassed = false;
        testPassed &= CheckComponentLocation(_rootComponent.Children[0], 780, 580, 10, 10,0,0,780,580);

        testPassed &= CheckComponentBorder(_rootComponent.Children[0], 5, 5, 5, 5);

        if (_rootComponent.Children[0].Children.Count != 4 ||
            !(_rootComponent.Children[0].Children[0] is StackPanel) ||
            !(_rootComponent.Children[0].Children[1] is StackPanel) ||
            !(_rootComponent.Children[0].Children[2] is StackPanel) ||
            !(_rootComponent.Children[0].Children[3] is StackPanel))
            testPassed = false;

        testPassed &= CheckComponentLocation(_rootComponent.Children[0].Children[0],
                                             760.0 * 2.0 / 3.0, 140, 10, 10, 0, 0, 506.6666564941406, 140);

        testPassed &= CheckComponentLocation(_rootComponent.Children[0].Children[1],
                                             760.0 * 2.0 / 3.0, 420, 10, 150, 0, 0, 506.6666564941406, 420);

        testPassed &= CheckComponentLocation(_rootComponent.Children[0].Children[2],
                                             760.0 / 3.0, 140, 760.0 * 2.0 / 3.0 + 10.0, 10, 0, 0, 253.3333282470703, 140);

        testPassed &= CheckComponentLocation(_rootComponent.Children[0].Children[3],
                                             760.0 / 3.0, 420, 760.0 * 2.0 / 3.0 + 10.0, 150, 0, 0, 253.3333282470703, 420);


        await TestComplete.InvokeAsync(testPassed);
    }
}