@using Microsoft.AspNetCore.Components
@namespace ClearBlazor
@typeparam TItem
@inherits InputBase

<CascadingValue Value="this" IsFixed="false">
    <div id="@Id" class="@Classes" style="@ComputeStyle()">
        <ScrollViewer @ref="ScrollViewer">
            @if (Virtualize)
            {
                <ClearBlazor.Virtualize @ref="VirtualizeElement" ScrollViewer=@ScrollViewer Context="item"
                                        Items=@ListViewData ItemHeight=@ItemHeight HorizontalContentAlignment=@HorizontalContentAlignment>
                    @if (item.Item1 != null)
                    {
                        <div style=@GetContentStyle()>
                            @RowTemplate(item.Item1)
                        </div>
                    }
                </ClearBlazor.Virtualize>
            }
            else
            {
                @foreach (var item in ListViewData!)
                {
                    <div style=@GetContentStyle()>
                        @RowTemplate(item)
                    </div>
                }
            }
        </ScrollViewer>
    </div>
</CascadingValue>